<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Experiment Page Wireframe (Multi-turn)</title>
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f4f4f5;
            color: #18181b;
            margin: 0;
            padding: 20px;
            display: flex;
            justify-content: center;
            height: 100vh;
            box-sizing: border-box;
        }

        .wireframe-container {
            width: 1200px;
            height: 800px;
            background: white;
            border: 2px solid #000;
            display: flex;
            flex-direction: row;
            /* Fix: Side-by-side layout */
            box-shadow: 10px 10px 0px rgba(0, 0, 0, 0.1);
            overflow: hidden;
            /* Prevent container scroll */
        }

        .header {
            height: 60px;
            border-bottom: 2px solid #000;
            display: flex;
            align-items: center;
            padding: 0 20px;
            font-weight: bold;
            font-size: 18px;
            justify-content: space-between;
        }

        .main-content {
            display: flex;
            flex: 1;
            overflow: hidden;
        }

        .left-col {
            width: 60%;
            /* Wider for chat history */
            border-right: 2px solid #000;
            padding: 20px;
            display: flex;
            flex-direction: column;
            gap: 15px;
            background-color: #fafafa;
            overflow-y: auto;
        }

        .right-col {
            width: 40%;
            padding: 20px;
            display: flex;
            flex-direction: column;
            gap: 20px;
            background-color: white;
        }

        .message-block {
            border: 1px solid #ccc;
            background: white;
            padding: 10px;
            border-radius: 4px;
            position: relative;
        }

        .message-role {
            font-size: 11px;
            font-weight: bold;
            text-transform: uppercase;
            margin-bottom: 5px;
            color: #666;
            display: flex;
            justify-content: space-between;
        }

        .role-system {
            color: #d946ef;
        }

        .role-user {
            color: #2563eb;
        }

        .role-assistant {
            color: #16a34a;
        }

        textarea {
            width: 100%;
            border: 1px solid #eee;
            padding: 8px;
            font-family: monospace;
            resize: vertical;
            min-height: 60px;
            box-sizing: border-box;
        }

        .add-msg-btn {
            border: 1px dashed #999;
            padding: 8px;
            text-align: center;
            cursor: pointer;
            color: #666;
            font-size: 12px;
        }

        .add-msg-btn:hover {
            background: #eee;
        }

        .controls {
            display: flex;
            gap: 10px;
            align-items: center;
            border-top: 2px solid #000;
            padding: 15px 20px;
            background: white;
        }

        .run-btn {
            background: #000;
            color: white;
            border: none;
            padding: 10px 20px;
            font-weight: bold;
            cursor: pointer;
            margin-left: auto;
        }

        .result-box {
            flex: 1;
            border: 2px solid #000;
            padding: 15px;
            background: #f0fdf4;
            overflow-y: auto;
        }

        .original-box {
            flex: 1;
            border: 2px dashed #999;
            padding: 15px;
            background: #f9f9f9;
            color: #666;
            overflow-y: auto;
        }

        .section-title {
            font-weight: bold;
            margin-bottom: 8px;
            font-size: 14px;
        }

        .view-toggle {
            display: flex;
            background: #eee;
            border-radius: 4px;
            padding: 2px;
            margin-bottom: 10px;
            width: fit-content;
        }

        .toggle-btn {
            padding: 5px 15px;
            font-size: 12px;
            cursor: pointer;
            border-radius: 3px;
        }

        .toggle-btn.active {
            background: white;
            font-weight: bold;
            box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
        }

        .json-editor {
            display: none;
            /* Hidden by default */
            width: 100%;
            height: 100%;
            font-family: monospace;
            background: #1e1e1e;
            color: #d4d4d4;
            padding: 15px;
            border-radius: 4px;
            resize: none;
            box-sizing: border-box;
        }

        .json-editor {
            display: none;
            /* Hidden by default */
            width: 100%;
            height: 100%;
            font-family: monospace;
            background: #1e1e1e;
            color: #d4d4d4;
            padding: 15px;
            border-radius: 4px;
            resize: none;
            box-sizing: border-box;
        }

        /* Sidebar Styles */
        .sidebar {
            width: 64px;
            /* Fixed collapsed width */
            background: #f9f9f9;
            border-right: 2px solid #000;
            display: flex;
            flex-direction: column;
            flex-shrink: 0;
            /* Prevent shrinking */
            height: 100%;
            /* Full height */
        }

        .nav-item {
            padding: 10px;
            border-radius: 4px;
            cursor: pointer;
            font-weight: 500;
            color: #666;
            text-decoration: none;
            display: flex;
            align-items: center;
            justify-content: center;
            /* Center icons */
            gap: 0;
            /* Remove gap */
            white-space: nowrap;
            overflow: hidden;
            height: 44px;
            /* Fixed height for touch target */
        }

        .nav-label {
            display: none;
            /* Hide labels permanently */
        }

        .nav-item:hover {
            background: #eee;
        }

        .nav-item.active {
            background: #000;
            color: white;
        }

        .main-layout {
            flex: 1;
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }
    </style>
</head>

<body>

    <div class="wireframe-container">
        <!-- Sidebar Navigation -->
        <!-- Sidebar Navigation -->
        <div class="sidebar">
            <div
                style="height: 64px; display: flex; align-items: center; justify-content: center; border-bottom: 1px solid #eee;">
                <img src="https://placehold.co/32x32/000000/FFFFFF/png" alt="Logo" style="height: 32px;">
            </div>
            <nav style="flex: 1; padding: 10px; display: flex; flex-direction: column; gap: 5px;">
                <a href="home_mockup.html" class="nav-item" title="Home">
                    <span style="font-size: 20px;">üè†</span>
                    <span class="nav-label">Home</span>
                </a>
                <a href="chat_page_mockup.html" class="nav-item active" title="Chat">
                    <span style="font-size: 20px;">üí¨</span>
                    <span class="nav-label">Chat</span>
                </a>
                <a href="datasets_mockup.html" class="nav-item" title="Datasets">
                    <span style="font-size: 20px;">üìä</span>
                    <span class="nav-label">Datasets</span>
                </a>
                <a href="finetune_dashboard_mockup.html" class="nav-item" title="Fine-tuning">
                    <span style="font-size: 20px;">‚ú®</span>
                    <span class="nav-label">Fine-tuning</span>
                </a>
            </nav>
            <div style="padding: 10px; border-top: 1px solid #eee;">
                <a href="#" class="nav-item" title="Settings">
                    <span style="font-size: 20px;">‚öôÔ∏è</span>
                    <span class="nav-label">Settings</span>
                </a>
            </div>
        </div>

        <div class="main-layout">
            <div class="header">
                <span>&larr; Back</span>
                <span>Experiment: Trace #8a2b3c</span>
            </div>

            <div class="main-content">
                <!-- Left Column: Conversation History -->
                <div class="left-col">
                    <div style="display:flex; justify-content:space-between; align-items:center;">
                        <div class="section-title">Request Body</div>
                        <div class="view-toggle">
                            <div class="toggle-btn active">Visual</div>
                            <div class="toggle-btn">JSON</div>
                        </div>
                    </div>

                    <!-- Custom Headers Section -->
                    <div style="margin-bottom: 15px; border: 1px solid #eee; border-radius: 4px;">
                        <div class="section-title"
                            style="padding: 8px 10px; background: #f9f9f9; margin: 0; cursor: pointer; display:flex; justify-content:space-between; font-size: 12px;">
                            <span>Custom Headers (Optional)</span>
                            <span>&#9660;</span>
                        </div>
                        <div style="padding: 10px; display: flex; flex-direction: column; gap: 5px;">
                            <div style="display: flex; gap: 5px;">
                                <input type="text" placeholder="Key (e.g. X-Custom-Auth)"
                                    style="flex: 1; padding: 5px; border: 1px solid #ddd; font-size: 12px;">
                                <input type="text" placeholder="Value"
                                    style="flex: 1; padding: 5px; border: 1px solid #ddd; font-size: 12px;">
                            </div>
                            <div class="add-msg-btn" style="font-size: 10px; padding: 4px;">+ Add Header</div>
                        </div>
                    </div>

                    <!-- Prompt Variables Section -->
                    <div style="margin-bottom: 15px; border: 1px solid #eee; border-radius: 4px;">
                        <div class="section-title"
                            style="padding: 8px 10px; background: #f9f9f9; margin: 0; cursor: pointer; display:flex; justify-content:space-between; font-size: 12px;">
                            <span>Prompt Variables (Mustache Syntax)</span>
                            <span>&#9660;</span>
                        </div>
                        <div style="padding: 10px; display: flex; flex-direction: column; gap: 5px;">
                            <div style="display: flex; gap: 5px; align-items: center;">
                                <div
                                    style="background: #eff6ff; color: #1e40af; padding: 4px 8px; border-radius: 4px; font-family: monospace; font-size: 12px;">
                                    {{assistant_name}}</div>
                                <span style="color: #666;">=</span>
                                <input type="text" value="Vllora" placeholder="Value"
                                    style="flex: 1; padding: 5px; border: 1px solid #ddd; font-size: 12px;">
                            </div>
                            <div style="display: flex; gap: 5px; align-items: center;">
                                <div
                                    style="background: #eff6ff; color: #1e40af; padding: 4px 8px; border-radius: 4px; font-family: monospace; font-size: 12px;">
                                    {{tone}}</div>
                                <span style="color: #666;">=</span>
                                <input type="text" value="concise and professional" placeholder="Value"
                                    style="flex: 1; padding: 5px; border: 1px solid #ddd; font-size: 12px;">
                            </div>
                            <div class="add-msg-btn" style="font-size: 10px; padding: 4px;">+ Add Variable</div>
                        </div>
                    </div>

                    <!-- Visual Editor Container -->
                    <div id="visual-editor">
                        <!-- Message 1: System -->
                        <div class="message-block">
                            <div class="message-role role-system">System <span>&#10005;</span></div>
                            <textarea>You are a helpful coding assistant named {{assistant_name}}. Please answer in a {{tone}} manner.</textarea>
                        </div>

                        <!-- Message 2: System (Context) -->
                        <div class="message-block">
                            <div class="message-role role-system">System (Context) <span>&#10005;</span></div>
                            <textarea>Current Date: 2023-10-27. User OS: MacOS.</textarea>
                        </div>

                        <!-- Message 3: User -->
                        <div class="message-block">
                            <div class="message-role role-user">
                                User <span>&#10005;</span>
                            </div>
                            <textarea>How do I center a div?</textarea>
                            <div style="margin-top: 5px; display: flex; gap: 5px;">
                                <div
                                    style="border: 1px solid #ddd; padding: 2px 8px; font-size: 10px; border-radius: 3px; cursor: pointer; background: #f0f0f0;">
                                    + Add Image</div>
                            </div>
                        </div>

                        <!-- Message 4: Assistant -->
                        <div class="message-block">
                            <div class="message-role role-assistant">Assistant <span>&#10005;</span></div>
                            <textarea>You can use Flexbox.</textarea>
                        </div>

                        <!-- Message 5: User (Current Turn) -->
                        <div class="message-block" style="border: 2px solid #2563eb;">
                            <div class="message-role role-user">User (Last Message)</div>
                            <div style="margin-bottom: 5px;">
                                <img src="https://placehold.co/50x50?text=Img"
                                    style="border: 1px solid #ccc; border-radius: 4px;" title="Attached Image">
                            </div>
                            <textarea>Can you describe this image?</textarea>
                            <div style="margin-top: 5px; display: flex; gap: 5px;">
                                <div
                                    style="border: 1px solid #ddd; padding: 2px 8px; font-size: 10px; border-radius: 3px; cursor: pointer; background: #f0f0f0;">
                                    + Add Image</div>
                            </div>
                        </div>

                        <div class="add-msg-btn">+ Add Message (System/User/Assistant)</div>

                        <!-- Tools Section -->
                        <div style="margin-top: 20px; border-top: 1px solid #eee; padding-top: 10px;">
                            <div class="section-title"
                                style="display:flex; justify-content:space-between; cursor:pointer;">
                                <span>Tools / Functions (1 Defined)</span>
                                <span>&#9660;</span>
                            </div>
                            <div
                                style="background: #f9f9f9; padding: 10px; border: 1px solid #eee; border-radius: 4px;">
                                <div style="font-size: 11px; font-weight: bold; margin-bottom: 5px;">get_current_weather
                                </div>
                                <textarea style="height: 80px; font-size: 11px; color: #666;">{
  "name": "get_current_weather",
  "description": "Get the current weather",
  "parameters": { ... }
}</textarea>
                                <div class="add-msg-btn" style="margin-top:5px;">+ Add Tool Definition</div>
                            </div>
                        </div>
                    </div>

                    <!-- JSON Editor Container -->
                    <textarea class="json-editor" id="json-editor">
{
  "model": "gpt-4",
  "messages": [
    {"role": "system", "content": "You are a helpful coding assistant."},
    {"role": "system", "content": "Current Date: 2023-10-27..."},
    {"role": "user", "content": "How do I center a div?"},
    {"role": "assistant", "content": "You can use Flexbox."},
    {"role": "user", "content": "Can you show me the code?"}
  ],
  "temperature": 0.7
}
                </textarea>
                </div>

                <!-- Right Column: Outputs -->
                <div class="right-col">
                    <div style="display: flex; gap: 10px; border-bottom: 1px solid #eee; padding-bottom: 10px;">
                        <div
                            style="font-weight: bold; border-bottom: 2px solid black; padding-bottom: 5px; cursor: pointer;">
                            Output</div>
                        <div style="color: #666; cursor: pointer;">Trace (Spans)</div>
                    </div>

                    <div class="result-box">
                        <div class="section-title">New Output</div>
                        <p style="font-family: monospace;">.parent { display: flex; ... }</p>
                        <div style="margin-top: 10px; text-align: right;">
                            <button
                                style="background: white; border: 1px solid #ccc; padding: 5px 10px; font-size: 11px; cursor: pointer; border-radius: 3px;">&#8618;
                                Continue with this response</button>
                        </div>
                    </div>

                    <!-- Trace View (Hidden in this mock state, but implied by tabs) -->
                    <div
                        style="display: none; border: 1px solid #eee; padding: 10px; background: #fafafa; font-family: monospace; font-size: 12px;">
                        <div>&#9660; [ROOT] chat_completion (1.2s)</div>
                        <div style="padding-left: 20px;">&#9658; [LLM] gpt-4 (1.1s)</div>
                        <div style="padding-left: 20px;">&#9658; [TOOL] get_weather (0.1s)</div>
                    </div>

                    <div class="original-box">
                        <div class="section-title">Original Output</div>
                        <p style="font-style: italic;">(Previous response content...)</p>
                    </div>
                </div>
            </div>

            <!-- Footer Controls -->
            <div class="controls" style="flex-direction: column; align-items: flex-start;">
                <div style="display: flex; gap: 15px; align-items: center; width: 100%;">
                    <label style="font-weight:bold;">Model: <select>
                            <option>gpt-4</option>
                            <option>claude-3-opus</option>
                            <option>llama-3-70b</option>
                        </select></label>
                    <label>Temp: <input type="number" value="0.7" style="width:40px"></label>
                    <div style="font-size: 12px; text-decoration: underline; cursor: pointer; color: #666;">&#9660; Show
                        Advanced Params</div>
                    <button class="run-btn">RUN &#9658;</button>
                </div>

                <!-- Advanced Params (Expanded View) -->
                <div
                    style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 10px; width: 100%; margin-top: 10px; padding-top: 10px; border-top: 1px dashed #ccc; background: #f9f9f9; padding: 10px;">
                    <div class="control-item"><label>Max Tokens</label><input type="number" value="4096"></div>
                    <div class="control-item"><label>Top P</label><input type="number" value="1.0"></div>
                    <div class="control-item"><label>Freq Penalty</label><input type="number" value="0.0"></div>
                    <div class="control-item"><label>Pres Penalty</label><input type="number" value="0.0"></div>
                    <div class="control-item"><label>Stop Seq</label><input type="text" placeholder="e.g. User:"></div>
                    <div class="control-item"><label>Response Format</label><select>
                            <option>Text</option>
                            <option>JSON Object</option>
                        </select></div>
                    <div class="control-item"
                        style="grid-column: span 2; color: #999; font-style: italic; font-size: 11px; display:flex; align-items:center;">
                        * Parameters update dynamically based on selected model
                    </div>
                </div>
            </div>
        </div>

    </div>
    </div>
</body>

</html>
```